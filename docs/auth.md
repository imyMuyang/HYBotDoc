# 调用与权限

HYBot 的 Bot API 直接调用了对应的机器人，如果是非正常启动则可能会出现 API 被滥用的情况。

## 调用

为防止滥用 HYBot，我们在关键 API 区域设置了授权机制，只接受以下插件的调用：

1. 文件名与文件地址合规
2. 已经注册过了数据库且查询数据库时该插件有访问 API 的权限
3. 插件的 MD5 值与数据库 MD5 值比对完全一致

三者缺一不可，但只要是正常启动的 HYBot 实例，`./plugin` 目录下的插件都能正常调用。

## 权限

HYBot 在 API 发送请求之前会检测插件是否有调用此 API 的权限。您可以在 getInfo 函数中这样设置权限：

```javascript
function getInfo() {
    // ...
    appInfo.auth = 权限所串联的数组
}
```

auth值的含义：（以下平台中 OneBot 简写为 O，Telegram 简写为 T）

| 值   | 平台 | 用途             |
| ---- | ---- | ---------------- |
| 1    | O    | 发送消息         |
| 11   | OT   | 发送私聊消息     |
| 12   | OT   | 发送群组消息     |
| 13   | T    | 发送超级群组消息 |

